{% extends 'home.html' %}
{% block content %}
    <table id="example" class="table table-striped" style="width:100%">
        <thead>
        <tr>
            <th> ID</th>
            <th scope="col">ФИО</th>
            <th scope="col">ФИО</th>
            <th scope="col">ФИО</th>
            <th scope="col">Должность</th>
            <th scope="col">Отдел</th>
            <th scope="col">Дата выдачи</th>
            <th scope="col">Дата окончания</th>

        </tr>
        </thead>
    </table>
    <script>
        var table = $('#example').DataTable({
            responsive: true,
            buttons: ['copy', 'csv', 'excel', 'pdf', 'print'],
            layout: {
                bottom1: 'searchBuilder',
                topStart: 'buttons',
            },
            language: {
                url: '//cdn.datatables.net/plug-ins/2.0.6/i18n/ru.json',
            },
            ajax: {
                url: "{% url 'load_data_to_workers' %}",
                dataSrc: "",
            },
            columns: [
                {
                    data: "pk", render: function (data, type, full, meta) {
                        return '<a href="view_request/' + data + '" target=_blank>' + data + '</a>'
                    }
                },
                {data: "worker__F"},
                {data: "worker__I"},
                {data: "worker__O"},
                {data: "worker__position__name"},
                {data: "worker__department__name"},
                {data: "date_start"},
                {data: "date_end"},


            ],
            select: true,
        });
        table.buttons().container()
            .appendTo($('.col-sm-6:eq(0)', table.table().container()));
    </script>

{% endblock %}